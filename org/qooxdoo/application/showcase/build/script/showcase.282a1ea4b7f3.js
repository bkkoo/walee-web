qx.$$packageData['16']={"locales":{},"resources":{},"translations":{"cs":{},"de":{},"de_AT":{},"de_DE":{},"en":{},"en_GB":{},"en_US":{},"es":{},"es_ES":{},"es_MX":{},"pt":{},"ro":{},"ro_RO":{},"sv":{},"sv_SE":{}}};
qx.Part.$$notifyLoad("16", function() {
(function(){var h="waitForNumber",g="number",f="showcase.page.theme.calc.view.ICalculator",d="showcase.page.theme.calc.Presenter",c="error",b="",a="_applyViewModel";qx.Class.define(d,{extend:qx.core.Object,construct:function(i,j){qx.core.Object.call(this);this.setView(i);this.setModel(j);},properties:{view:{check:f,apply:a},model:{apply:a,init:null}},members:{MAX_DISPLAY_SIZE:16,_applyViewModel:function(k,l){if(l){throw new Error("The view and model cannot be changed!");};var m=this.getModel();var n=this.getView();if(!m||!n){return;};this.__PI();this.__PJ();},__PI:function(){this.getView().addListener("buttonPress",this._onButtonPress,this);},_onButtonPress:function(e){this.getModel().readToken(e.getData());},__PJ:function(){var o=this.getModel();o.setMaxInputLength(this.MAX_DISPLAY_SIZE);var p=this.getView();o.bind("operator",p,"operation",{converter:function(q){return q?q:"";}});o.bind("memory",p,"memory",{converter:function(r){return r===null?false:true;}});o.addListener("changeState",this._updateDisplay,this);o.addListener("changeInput",this._updateDisplay,this);o.addListener("changeValue",this._updateDisplay,this);o.addListener("changeErrorMessage",this._updateDisplay,this);},_updateDisplay:function(e){var s;var t=this.getModel();switch(this.getModel().getState()){case g:s=t.getInput();break;case h:s=t.getValue()+b;if(s.length>this.MAX_DISPLAY_SIZE){s=t.getValue().toExponential(this.MAX_DISPLAY_SIZE-7);};break;case c:s=t.getErrorMessage();break;};this.getView().setDisplay(s||b);}}});})();(function(){var a="showcase.page.theme.Content";qx.Class.define(a,{extend:showcase.AbstractContent,construct:function(b){showcase.AbstractContent.call(this,b);this.setView(this._createView());},members:{_createView:function(){var f=new qx.ui.window.Desktop(new qx.ui.window.Manager());var d=new showcase.page.theme.calc.view.Calculator(true);f.add(d);d.moveTo(60,40);d.open();var c=new showcase.page.theme.calc.Model();new showcase.page.theme.calc.Presenter(d,c);var d=new showcase.page.theme.calc.view.Calculator(false);f.add(d);d.moveTo(340,40);d.open();var c=new showcase.page.theme.calc.Model();new showcase.page.theme.calc.Presenter(d,c);this.__PH(d);return f;},__PH:function(g){if(!("WebkitTransition" in document.documentElement.style)){return;};var i=true;var h=new qx.ui.basic.Image("showcase/theme/affe.png").set({backgroundColor:"#525252",padding:[50,5,5,0]});g.addListener("dblclick",function(e){var j=g.getContainerElement().getDomElement();j.style.WebkitTransition="-webkit-transform 0.3s ease-in";if(i){j.style.WebkitTransform="perspective(600) rotateY(90deg)";}else {j.style.WebkitTransform="perspective(600) rotateY(270deg)";};j.addEventListener("webkitTransitionEnd",function(){j.removeEventListener("webkitTransitionEnd",arguments.callee,false);if(i){var k=g.getChildrenContainer().getBounds();h.setUserBounds(0,0,k.width,k.height);g.add(h);g.setCaption("");}else {g.remove(h);g.setCaption("Calculator");};qx.ui.core.queue.Manager.flush();j.style.WebkitTransition="-webkit-transform 0.3s ease-out";if(i){j.style.WebkitTransform="perspective(600) rotateY(180deg)";}else {j.style.WebkitTransform="perspective(600) rotateY(360deg)";j.addEventListener("webkitTransitionEnd",function(){j.removeEventListener("webkitTransitionEnd",arguments.callee,false);j.style.WebkitTransition="";j.style.WebkitTransform="perspective(600) rotateY(0deg)";},false);};i=!i;},false);});}}});})();(function(){var d="String",c="Boolean",b="showcase.page.theme.calc.view.ICalculator",a="qx.event.type.Data";qx.Interface.define(b,{events:{"buttonPress":a},properties:{display:{},memory:{check:c},operation:{check:d}}});})();(function(){var k="Boolean",j="_buttons",i="keydown",h="button",g="qx.event.type.Data",f="modern-calculator",d="showcase.page.theme.calc.view.Calculator",c="changeOperation",b="execute",a="calculator",P="/",O="String",N="&divide;",M="",L="Calculator",K="buttonPress",J="keyup",I="changeDisplay",H="keypress",G="Enter",r="=",s="changeMemory",p="_keyIdentifier",q="&plusmn;",n="-",o="operation",l="+",m="7",t="5",u="memory",y="3",x="2",A="8",z="*",C="6",B="4",w="1",F=".",E="9",D="0",v="display";qx.Class.define(d,{extend:qx.ui.window.Window,implement:[showcase.page.theme.calc.view.ICalculator],construct:function(Q){qx.ui.window.Window.call(this,L);this._isModern=!!Q;if(this._isModern){this.setAppearance(f);};this.set({showMinimize:false,showMaximize:false,allowMaximize:false,showClose:false});this.setLayout(new qx.ui.layout.VBox());this._initButtons();this.add(this.getChildControl(v));this.add(this._createButtonContainer(),{flex:1});this._initKeyIdentifier();this.addListener(i,this._onKeyDown,this);this.addListener(J,this._onKeyUp,this);this.addListener(H,this._onKeyPress,this);},events:{"buttonPress":g},properties:{appearance:{refine:true,init:a},display:{init:D,event:I},memory:{check:k,init:false,event:s},operation:{check:O,init:M,event:c}},members:{_buttons:null,_keyIdentifier:null,_pressedButton:null,_initButtons:function(){this._buttons={"MC":new showcase.page.theme.calc.view.Button("MC",0,0),"M+":new showcase.page.theme.calc.view.Button("M+",0,1),"M-":new showcase.page.theme.calc.view.Button("M-",0,2),"MR":new showcase.page.theme.calc.view.Button("MR",0,3),"C":new showcase.page.theme.calc.view.Button("C",1,0),"sign":new showcase.page.theme.calc.view.Button(q,1,1),"/":new showcase.page.theme.calc.view.Button(N,1,2,null,null,P),"*":new showcase.page.theme.calc.view.Button(z,1,3,null,null,z),"7":new showcase.page.theme.calc.view.Button(m,2,0,null,null,m),"8":new showcase.page.theme.calc.view.Button(A,2,1,null,null,A),"9":new showcase.page.theme.calc.view.Button(E,2,2,null,null,E),"-":new showcase.page.theme.calc.view.Button(n,2,3,null,null,n),"4":new showcase.page.theme.calc.view.Button(B,3,0,null,null,B),"5":new showcase.page.theme.calc.view.Button(t,3,1,null,null,t),"6":new showcase.page.theme.calc.view.Button(C,3,2,null,null,C),"+":new showcase.page.theme.calc.view.Button(l,3,3,null,null,l),"1":new showcase.page.theme.calc.view.Button(w,4,0,null,null,w),"2":new showcase.page.theme.calc.view.Button(x,4,1,null,null,x),"3":new showcase.page.theme.calc.view.Button(y,4,2,null,null,y),"=":new showcase.page.theme.calc.view.Button(r,4,3,2,null,G),"0":new showcase.page.theme.calc.view.Button(D,5,0,null,2,D),".":new showcase.page.theme.calc.view.Button(F,5,2,null,null,F)};if(this._isModern){for(var R in this._buttons){this._buttons[R].setAppearance(h);};};},_initKeyIdentifier:function(){this._keyIdentifier=[];for(var name in this._buttons){var S=this._buttons[name];var T=S.getKeyIdentifier();S.addListener(b,this._onButtonExecute,this);if(T){this._keyIdentifier[T]=S;};};},_createChildControlImpl:function(U){if(U===v){var V=new showcase.page.theme.calc.view.Display();this.bind(v,V,v);this.bind(u,V,u);this.bind(o,V,o);return V;}else {return qx.ui.window.Window.prototype._createChildControlImpl.call(this,U);};},_createButtonContainer:function(){var X=new qx.ui.container.Composite();var W=new qx.ui.layout.Grid(5,5);X.setLayout(W);for(var ba=0;ba<6;ba++){W.setRowFlex(ba,1);};for(var Y=0;Y<6;Y++){W.setColumnFlex(Y,1);};for(var name in this._buttons){X.add(this._buttons[name]);};return X;},_onButtonExecute:function(e){var name=qx.lang.Object.getKeyFromValue(this._buttons,e.getTarget());this.fireDataEvent(K,name);},_onKeyDown:function(e){var bb=this._keyIdentifier[e.getKeyIdentifier()];if(!bb){return;};bb.press();if(this._pressedButton&&this._pressedButton!==bb){this._pressedButton.release();};this._pressedButton=bb;e.stop();},_onKeyUp:function(e){var bc=this._keyIdentifier[e.getKeyIdentifier()];if(!bc){return;};bc.release();e.stop();},_onKeyPress:function(e){var bd=this._keyIdentifier[e.getKeyIdentifier()];if(!bd){return;};bd.execute();e.stop();}},destruct:function(){this._disposeMap(j);this._disposeArray(p);}});})();(function(){var m="M",l="0",k="Boolean",j="",i="showcase.page.theme.calc.view.Display",h="_applyOperation",g="_applyDisplay",f="_applyMemory",e="String",d="display",a="operation",c="label",b="memory";qx.Class.define(i,{extend:qx.ui.core.Widget,construct:function(){qx.ui.core.Widget.call(this);this._setLayout(new qx.ui.layout.Canvas());this._add(this.getChildControl(c),{top:0,right:0});this._add(this.getChildControl(b),{bottom:0,left:0});this._add(this.getChildControl(a),{bottom:0,left:0});},properties:{appearance:{refine:true,init:d},display:{init:l,apply:g},memory:{check:k,init:false,apply:f},operation:{check:e,init:j,apply:h}},members:{_createChildControlImpl:function(n){var o;switch(n){case c:o=new qx.ui.basic.Label(this.getDisplay());break;case b:o=new qx.ui.basic.Label(m);o.exclude();break;case a:o=new qx.ui.basic.Label(this.getOperation());o.setRich(true);break;};return o||qx.ui.core.Widget.prototype._createChildControlImpl.call(this,n);},_applyDisplay:function(p,q){this.getChildControl(c).setValue(p.toString());},_applyMemory:function(r,s){if(r){this._showChildControl(b);}else {this._excludeChildControl(b);};},_applyOperation:function(t,u){this.getChildControl(a).setValue(t.toString());}}});})();(function(){var j="-",i="waitForNumber",h="C",g="showcase.page.theme.calc.Model",f="changeValue",e="M+",d="changeInput",c="Integer",b="MC",a="0",C="sign",B="+",A="_applyState",z="changeState",y="/",x="*",w="",v="MR",u="changeOperator",t="M-",q="changeErrorMessage",r="=",o="changeMemory",p="changeOperant",m=".",n="error",k="String",l="number",s="Number";qx.Class.define(g,{extend:qx.core.Object,construct:function(){qx.core.Object.call(this);this.initState();},properties:{state:{check:[l,i,n],event:z,init:l,apply:A},errorMessage:{check:k,init:w,event:q},input:{check:k,nullable:true,event:d},maxInputLength:{check:c,init:20},operator:{check:[B,j,x,y],nullable:true,event:u},operant:{check:s,nullable:true,event:p},value:{check:s,nullable:true,event:f},memory:{check:s,nullable:true,event:o}},members:{readToken:function(D){if(D.match(/^[0123456789]$/)){this.__PM(D);}else if(D.match(/^[\+\-\*\/]$/)){this.__PP(D);}else if(D==C){this.__PN();}else if(D==m){this.__PO();}else if(D==r){this.__PQ();}else if(D==h){this.__PR();}else if(D==e){this.__PS(D);}else if(D==t){this.__PS(D);}else if(D==b){this.__PU();}else if(D==v){this.__PT();};},__PK:function(){return parseFloat(this.getInput());},__PL:function(E,F,G){switch(G){case "+":return E+F;case "-":return E-F;case "*":return E*F;case "/":if(F==0){this.setErrorMessage("Division by zero!");this.setState("error");return null;}else {return E/F;};};},_applyState:function(H,I){if(H==l){this.setInput(a);}else if(H==n){this.setOperator(null);};},__PM:function(J){this.setState("number");var K=this.getInput();if(K.length>=this.getMaxInputLength()-1){return;};if(J=="0"){if(K!=="0"){K+="0";};}else {if(K=="0"){K=J;}else {K+=J;};};this.setInput(K);},__PN:function(){this.setState("number");var L=this.getInput();if(L=="0"){return;};var M=L.charAt(0)=="-";if(M){L=L.substr(1);}else {L="-"+L;};this.setInput(L);},__PO:function(){this.setState("number");var N=this.getInput();if(N.length>=this.getMaxInputLength()-1){return;};var O=N.indexOf(".")!==-1;if(!O){N+=".";};this.setInput(N);},__PP:function(P){var R=this.getState();if(R=="error"){return;}else if(R=="waitForNumber"){this.setOperator(P);return;};this.setState("waitForNumber");var Q=this.__PK();var S=this.getValue();if(S!==null){this.setValue(this.__PL(S,Q,this.getOperator()));}else {this.setValue(Q);};this.setOperant(Q);this.setOperator(P);},__PQ:function(){var T=this.getOperator();if(!T){return;};var V=this.getValue();if(this.getState()=="waitForNumber"){this.setValue(this.__PL(V,this.getOperant(),T));return;};this.setState("waitForNumber");var U=this.__PK();this.setOperant(U);this.setValue(this.__PL(V,U,T));},__PR:function(){this.setState("number");this.setOperator(null);this.setValue(null);this.setInput("0");},__PS:function(W){var X=this.getState();var Y;if(X=="error"){return;}else if(X=="waitForNumber"){Y=this.getValue();}else {Y=this.__PK();};var ba=this.getMemory()||0;if(W=="M+"){this.setMemory(ba+Y);}else {this.setMemory(ba-Y);};},__PT:function(){var bb=this.getMemory();if(bb==null){return;};this.setState("number");this.setInput(bb.toString());},__PU:function(){this.setMemory(null);}}});})();(function(){var b="calculator-button",a="showcase.page.theme.calc.view.Button";qx.Class.define(a,{extend:qx.ui.form.Button,construct:function(c,d,e,f,g,h){qx.ui.form.Button.call(this,c);this.set({rich:true,focusable:false,keepActive:true,allowShrinkX:false,allowShrinkY:false});this.setLayoutProperties({row:d,column:e,rowSpan:f||1,colSpan:g||1});this._keyIdentifier=h||null;},properties:{appearance:{refine:true,init:b}},members:{getKeyIdentifier:function(){return this._keyIdentifier;}}});})();
});